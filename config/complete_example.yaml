# Complete EA-IDL configuration example
#
# This file demonstrates all available configuration options, including
# the new diagram renderer settings introduced in version 0.2.0.
#
# =============================================================================
# YAML Includes (Composition)
# =============================================================================
# You can split configuration across multiple files using !include:
#
# Single file include (replaces entire config):
#   !include base.yaml
#
# Multiple file deep merge (later files override earlier ones):
#   !include [base.yaml, overrides.yaml]
#
# Partial section include:
#   spellcheck: !include spellcheck-config.yaml
#   diagrams: !include diagram-config.yaml
#
# Paths are resolved relative to the including file.
# =============================================================================

# =============================================================================
# Database Connection
# =============================================================================
database_url: sqlite+pysqlite:///tests/data/nafv4.qea
# Or for PostgreSQL:
# database_url: postgresql+psycopg2://user:password@localhost/dbname

# =============================================================================
# Package Selection
# =============================================================================
# Root packages to process (by GUID)
root_packages:
  - "{753A4DFC-7876-4b00-BB5A-6274AD3817C3}"

# Alternative: specify by name (less reliable)
# root_package_name: "MyRootPackage"

# Packages to exclude (by GUID)
# ignore_packages:
#   - "{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}"

# =============================================================================
# Stereotypes Configuration
# =============================================================================
# Filter by stereotypes (only process elements with these stereotypes)
# filter_stereotypes:
#   - "idlStruct"
#   - "idlEnum"

# =============================================================================
# Empty Union Handling
# =============================================================================
# Control how empty and single-element unions are handled
#
# Mode 1: Collapse by default (default behavior)
# - Empty/single unions are removed unless marked with <<keep>> stereotype
# collapse_empty_unions_by_default: true  # default
# keep_union_stereotype: "keep"  # stereotype to preserve unions
#
# Mode 2: Keep by default
# - Empty/single unions are preserved unless marked with <<collapse>> stereotype
# collapse_empty_unions_by_default: false
# collapse_union_stereotype: "collapse"  # stereotype to remove unions

# =============================================================================
# Template Selection
# =============================================================================
# IDL template to use (see src/eaidl/templates/)
# template: "idl_just_defs.jinja2"  # Default
# template: "idl.jinja2"  # Full IDL with includes

# =============================================================================
# Type Mapping
# =============================================================================
# Map EA types to IDL types
# primitive_types:
#   "int": "long"
#   "unsigned int": "unsigned long"
#   "bool": "boolean"
#   "text": "string"

# =============================================================================
# Diagram Configuration (NEW in v0.2.0)
# =============================================================================
diagrams:
  # Diagram renderer: "mermaid" (default) or "plantuml"
  #
  # Mermaid:
  #   + No server required (client-side JavaScript rendering)
  #   + Works with file:// URLs
  #   - No stereotype support in v11
  #   - Rendering can vary by browser
  #
  # PlantUML:
  #   + Full stereotype support (<<struct>>, <<enum>>, etc.)
  #   + Server-side rendering (consistent across browsers)
  #   + Better label handling
  #   - Requires PlantUML server
  renderer: plantuml

  # PlantUML server URL (required when renderer is "plantuml")
  # Start server with: docker run -d -p 10005:8080 plantuml/plantuml-server:jetty
  plantuml_server_url: http://localhost:10005/

# =============================================================================
# Validation & Spellcheck
# =============================================================================
spellcheck:
  enabled: true
  check_notes: true
  check_identifiers: true
  # Add custom words to dictionary
  custom_words:
    - seq
    - lobw
    - hibw
    - nafv4
allowed_abbreviations:
  - "MCM"      # e.g., MCMContact
  - "URI"      # e.g., URI, URIParser
  - "CQL"      # e.g., CQL2ExpressionTypeEnum
  - "URL"      # e.g., URLParser, HTTPSURLConnection
  - "HTTP"     # e.g., HTTPRequest
  - "HTTPS"    # e.g., HTTPSConnection
  - "XML"      # e.g., XMLParser, ParserXML
  - "JSON"     # e.g., JSONEncoder
  - "API"      # e.g., APIClient
  - "ID"       # e.g., UserID

# =============================================================================
# Output Options
# =============================================================================
# Include notes in output
# output_linked_notes: true
# output_unlinked_notes: false
# Allow recursive struct definitions (IDL 4.2+)
# allow_recursive_structs: true

# =============================================================================
# Usage Examples
# =============================================================================
#
# Generate IDL:
#   uv run eaidl run --config config/complete_example.yaml
#
# Generate HTML documentation:
#   uv run eaidl docs --config config/complete_example.yaml --output ./docs
#
# Validate model:
#   uv run eaidl validate --config config/complete_example.yaml
#
